# Resize submap
submap = resize
binde = , H, resizeactive, -10 0
binde = , L, resizeactive, 10 0
binde = , K, resizeactive, 0 -10
binde = , J, resizeactive, 0 10
bind = , escape, submap, reset
bind = , return, submap, reset
submap = reset

# ==========================================
# Window Rules (Hyprland 0.53+ syntax)
# ==========================================

# Suppress maximize events for all windows
windowrule = match:class .*, suppress_event maximize

# Smart gaps - remove borders/rounding when only one tiled window
windowrule {
  name = smart-gaps-tv1-tiled
  match:float = false
  match:workspace = w[tv1]
  border_size = 0
  rounding = 0
}

windowrule {
  name = smart-gaps-fullscreen-tiled
  match:float = false
  match:workspace = f[1]
  border_size = 0
  rounding = 0
}

# Workspace assignments
windowrule = match:class firefox-esr, workspace 1
windowrule = match:class zen, workspace 1
windowrule = match:class emacs, workspace 2
windowrule = match:class kitty, workspace 3
windowrule = match:class foot, workspace 3
windowrule = match:class footclient, workspace 3
windowrule = match:class com.mitchellh.ghostty, workspace 3
windowrule = match:class Slack, workspace 4
windowrule = match:class discord, workspace 4
windowrule = match:class Element, workspace 5
windowrule = match:class wechat, workspace 5
windowrule = match:class steam, workspace 6

# Floating dialogs with size
windowrule {
  name = float-pavucontrol
  match:class = ^(pavucontrol)$
  float = on
  size = 800 600
}

windowrule {
  name = float-blueman
  match:class = ^(blueman-manager)$
  float = on
  size = 800 600
}

windowrule {
  name = float-nm-editor
  match:class = ^(nm-connection-editor)$
  float = on
  size = 800 600
}

windowrule = match:class ^(nwg-look)$, float on

# File dialogs
windowrule = match:title ^(Open File)(.*), float on
windowrule = match:title ^(Select a File)(.*), float on
windowrule = match:title ^(Choose wallpaper)(.*), float on
windowrule = match:title ^(Open Folder)(.*), float on
windowrule = match:title ^(Save As)(.*), float on
windowrule = match:title ^(Library)(.*), float on

# KDE application dialogs
# Float windows with common dialog titles
windowrule = match:title ^(.*)(Properties)(.*)$, float on
windowrule = match:title ^(.*)(Preferences)(.*)$, float on
windowrule = match:title ^(.*)(Settings)(.*)$, float on
windowrule = match:title ^(Configure)(.*)$, float on
windowrule = match:title ^(Delete)(.*)$, float on
windowrule = match:title ^(Rename)(.*)$, float on

# Float small utility KDE apps
windowrule = match:class ^(kcalc)$, float on
windowrule = match:class ^(org\.kde\.polkit-kde-authentication-agent-1)$, float on

# Picture-in-Picture
windowrule {
  name = pip-window
  match:title = ^(Picture-in-Picture)$
  float = on
  pin = on
  move = 75% 75%
  size = 25% 25%
}

# Fix XWayland drag issues
windowrule {
  name = fix-xwayland-drags
  match:class = ^$
  match:title = ^$
  match:xwayland = true
  match:float = true
  match:fullscreen = false
  no_focus = on
}
